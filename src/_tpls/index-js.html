
	<script type="text/javascript" src="/js/jquery-1.8.3.min.js"> </script>

	<script type="text/javascript">

	$(document).ready(function() {

		var walkAnimationInterval = null;
		var scrollTimeOut = null;

		var animateWalk = function () {
			return setInterval(
				function () {
					$('#earthbounded').toggleClass('left right');
				}, 100)
		}

		var stopWalkAnimation = function(tid) {
			clearInterval(tid);
		}

		$(window).on('scroll', function() {

			if (walkAnimationInterval == null) {
				walkAnimationInterval = animateWalk();
			}
			if (scrollTimeOut !== null) {
				clearTimeout(scrollTimeOut);
			}
			scrollTimeOut = setTimeout(function() {
				stopWalkAnimation(walkAnimationInterval);
				walkAnimationInterval = null;
			}, 100)

			var scrollTopValue = $(window).scrollTop();
			var windowHeightValue = $(window).height();

      // Waiting until reaching center
      var startGame = parseInt(908-windowHeightValue/2);
      if(scrollTopValue >= startGame) {
      	$('#earthbounded').css('position', 'fixed');
      	$('#earthbounded').css('top', '50%');
      }
      else {
      	$('#earthbounded').css('position', 'absolute');
      	$('#earthbounded').css('top', '908px');
      }

      // Enter Forest
      var enterForest = parseInt(1571-windowHeightValue/2);
      var exitCave = parseInt(2675-windowHeightValue/2)

      // Board Saturn Valley UFO
      var boardUFO = parseInt(3228-windowHeightValue/2);
      var phaseInterval = parseInt(windowHeightValue/6);

      if(scrollTopValue >= enterForest && scrollTopValue <= exitCave || scrollTopValue >= boardUFO) {
      	$('#earthbounded').css("display", "none");
      }
      else {
      	$('#earthbounded').css("display", "block");
      }

      // Phased UFO
      if(scrollTopValue >= boardUFO+phaseInterval) {
      	$('#distorter').removeClass('phased1');
      	$('#distorter').addClass('phased2');
      }
      else {
      	$('#distorter').addClass('phased1');
      	$('#distorter').removeClass('phased2');
      }

      if(scrollTopValue >= boardUFO+phaseInterval*2) {
      	$('#distorter').removeClass('phased2');
      }

      var showUFO = parseInt(4464-windowHeightValue/2);
      if(scrollTopValue >= showUFO) {
      	$('#ufo').addClass('flying');
      }
      else {
      	$('#ufo').removeClass('flying');
      }

      var landUFO = parseInt(6454-windowHeightValue/2);
      if(scrollTopValue >= landUFO) {
      	$('#ufo').removeClass('flying');
      	$('#ending').addClass('show');
      }
      else {
      	$('#ending').removeClass('show');

      }

    }); //window scroll
	}); //document ready
</script>
